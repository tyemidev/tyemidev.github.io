<!DOCTYPE html>
<html>
<head>
<title>Tyemi Terminal Installer</title>

<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<link rel="stylesheet" type="text/css" href="../styles/tyemi.css"/>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
function install(){
   var w, autodate, enapp, data;

   // Getting current >Tyemi< app
   $("#autodate").load("https://tyemidev.github.io/tyemiterminal/app.html");
   autodate = document.getElementById('autodate');

    setTimeout(() => {
        // Encode
        encapp = btoa(autodate.innerHTML);

        // Blob
        //blobt('text/html', 'data:text/html;base64,'+encapp)

        // open
        w = window.open()
        w.document.write("<iframe style='width:100%;height:100%;border:none;padding:0;margin:0;' src='data:text/html;base64,"+encapp+"'></iframe>");
    }, 300);
};

function blobt(type, data){
    const base64data = data;
    const contentType = type;

    const byteCharacters = atob(base64data.substr(`data:${contentType};base64,`.length));
    const byteArrays = [];

    for (let offset = 0; offset < byteCharacters.length; offset += 1024) {
        const slice = byteCharacters.slice(offset, offset + 1024);

        const byteNumbers = new Array(slice.length);
        for (let i = 0; i < slice.length; i++) {
            byteNumbers[i] = slice.charCodeAt(i);
        }

        const byteArray = new Uint8Array(byteNumbers);

        byteArrays.push(byteArray);
    }
    const blob = new Blob(byteArrays, {type: contentType});
    const blobUrl = URL.createObjectURL(blob);

    window.open(blobUrl, '_blank');
}
</script>

</head>
<body style="text-align: center;">

<h1 style="font-size: 4vw;">Tyemi Terminal Installer</h1>
<h3>New font is sick, isn't it?</h3>
<button style="width:100%; padding:1%; font-size:2vw; text-align: center;" onclick="install();">Install</button>


<div id="autodate" style="display: none;"></div>
</body>
</html>