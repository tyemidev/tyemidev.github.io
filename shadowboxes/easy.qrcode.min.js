(function(){var f;var n=typeof global=="object"&&global&&global.Object===Object&&global;var d=typeof self=="object"&&self&&self.Object===Object&&self;var s=n||d||Function("return this")();var k=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var B=k&&typeof module=="object"&&module&&!module.nodeType&&module;var b=s.QRCode;var q;function g(G,H){this.mode=e.MODE_8BIT_BYTE;this.data=G;this.parsedData=[];for(var E=0,D=this.data.length;E<D;E++){var C=[];var F=this.data.charCodeAt(E);if(H){C[0]=F}else{if(F>65536){C[0]=240|((F&1835008)>>>18);C[1]=128|((F&258048)>>>12);C[2]=128|((F&4032)>>>6);C[3]=128|(F&63)}else{if(F>2048){C[0]=224|((F&61440)>>>12);C[1]=128|((F&4032)>>>6);C[2]=128|(F&63)}else{if(F>128){C[0]=192|((F&1984)>>>6);C[1]=128|(F&63)}else{C[0]=F}}}}this.parsedData.push(C)}this.parsedData=Array.prototype.concat.apply([],this.parsedData);if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239)}}g.prototype={getLength:function(i){return this.parsedData.length},write:function(D){for(var E=0,C=this.parsedData.length;E<C;E++){D.put(this.parsedData[E],8)}}};function y(C,i){this.typeNumber=C;this.errorCorrectLevel=i;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}y.prototype={addData:function(C,D){var i=new g(C,D);this.dataList.push(i);this.dataCache=null},isDark:function(C,i){if(C<0||this.moduleCount<=C||i<0||this.moduleCount<=i){throw new Error(C+","+i)}return this.modules[C][i][0]},getEye:function(E,i){if(E<0||this.moduleCount<=E||i<0||this.moduleCount<=i){throw new Error(E+","+i)}var D=this.modules[E][i];if(D[1]){var C="P"+D[1]+"_"+D[2];if(D[2]=="A"){C="A"+D[1]}return{isDark:D[0],type:C}}else{return null}},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(false,this.getBestMaskPattern())},makeImpl:function(E,D){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var C=0;C<this.moduleCount;C++){this.modules[C]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[C][i]=[]}}this.setupPositionProbePattern(0,0,"TL");this.setupPositionProbePattern(this.moduleCount-7,0,"BL");this.setupPositionProbePattern(0,this.moduleCount-7,"TR");this.setupPositionAdjustPattern("A");this.setupTimingPattern();this.setupTypeInfo(E,D);if(this.typeNumber>=7){this.setupTypeNumber(E)}if(this.dataCache==null){this.dataCache=y.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)}this.mapData(this.dataCache,D)},setupPositionProbePattern:function(E,i,D){for(var C=-1;C<=7;C++){if(E+C<=-1||this.moduleCount<=E+C){continue}for(var F=-1;F<=7;F++){if(i+F<=-1||this.moduleCount<=i+F){continue}if((0<=C&&C<=6&&(F==0||F==6))||(0<=F&&F<=6&&(C==0||C==6))||(2<=C&&C<=4&&2<=F&&F<=4)){this.modules[E+C][i+F][0]=true;this.modules[E+C][i+F][2]=D;if(C==-0||F==-0||C==6||F==6){this.modules[E+C][i+F][1]="O"}else{this.modules[E+C][i+F][1]="I"}}else{this.modules[E+C][i+F][0]=false}}}},getBestMaskPattern:function(){var F=0;var E=0;for(var D=0;D<8;D++){this.makeImpl(true,D);var C=p.getLostPoint(this);if(D==0||F>C){F=C;E=D}}return E},createMovieClip:function(F,i,D){var J=F.createEmptyMovieClip(i,D);var E=1;this.make();for(var K=0;K<this.modules.length;K++){var H=K*E;for(var C=0;C<this.modules[K].length;C++){var I=C*E;var G=this.modules[K][C][0];if(G){J.beginFill(0,100);J.moveTo(I,H);J.lineTo(I+E,H);J.lineTo(I+E,H+E);J.lineTo(I,H+E);J.endFill()}}}return J},setupTimingPattern:function(){for(var i=8;i<this.moduleCount-8;i++){if(this.modules[i][6][0]!=null){continue}this.modules[i][6][0]=(i%2==0)}for(var C=8;C<this.moduleCount-8;C++){if(this.modules[6][C][0]!=null){continue}this.modules[6][C][0]=(C%2==0)}},setupPositionAdjustPattern:function(G){var J=p.getPatternPosition(this.typeNumber);for(var E=0;E<J.length;E++){for(var D=0;D<J.length;D++){var H=J[E];var C=J[D];if(this.modules[H][C][0]!=null){continue}for(var F=-2;F<=2;F++){for(var I=-2;I<=2;I++){if(F==-2||F==2||I==-2||I==2||(F==0&&I==0)){this.modules[H+F][C+I][0]=true;this.modules[H+F][C+I][2]=G;if(F==-2||I==-2||F==2||I==2){this.modules[H+F][C+I][1]="O"}else{this.modules[H+F][C+I][1]="I"}}else{this.modules[H+F][C+I][0]=false}}}}}},setupTypeNumber:function(F){var E=p.getBCHTypeNumber(this.typeNumber);for(var D=0;D<18;D++){var C=(!F&&((E>>D)&1)==1);this.modules[Math.floor(D/3)][D%3+this.moduleCount-8-3][0]=C}for(var D=0;D<18;D++){var C=(!F&&((E>>D)&1)==1);this.modules[D%3+this.moduleCount-8-3][Math.floor(D/3)][0]=C}},setupTypeInfo:function(H,G){var F=(this.errorCorrectLevel<<3)|G;var E=p.getBCHTypeInfo(F);for(var D=0;D<15;D++){var C=(!H&&((E>>D)&1)==1);if(D<6){this.modules[D][8][0]=C}else{if(D<8){this.modules[D+1][8][0]=C}else{this.modules[this.moduleCount-15+D][8][0]=C}}}for(var D=0;D<15;D++){var C=(!H&&((E>>D)&1)==1);if(D<8){this.modules[8][this.moduleCount-D-1][0]=C}else{if(D<9){this.modules[8][15-D-1+1][0]=C}else{this.modules[8][15-D-1][0]=C}}}this.modules[this.moduleCount-8][8][0]=(!H)},mapData:function(G,C){var E=-1;var K=this.moduleCount-1;var F=7;var i=0;for(var D=this.moduleCount-1;D>0;D-=2){if(D==6){D--}while(true){for(var I=0;I<2;I++){if(this.modules[K][D-I][0]==null){var H=false;if(i<G.length){H=(((G[i]>>>F)&1)==1)}var J=p.getMask(C,K,D-I);if(J){H=!H}this.modules[K][D-I][0]=H;F--;if(F==-1){i++;F=7}}}K+=E;if(K<0||this.moduleCount<=K){K-=E;E=-E;break}}}}};y.PAD0=236;y.PAD1=17;y.createData=function(J,I,F){var D=x.getRSBlocks(J,I);var C=new r();for(var E=0;E<F.length;E++){var H=F[E];C.put(H.mode,4);C.put(H.getLength(),p.getLengthInBits(H.mode,J));H.write(C)}var G=0;for(var E=0;E<D.length;E++){G+=D[E].dataCount}if(C.getLengthInBits()>G*8){throw new Error("code length overflow. ("+C.getLengthInBits()+">"+G*8+")")}if(C.getLengthInBits()+4<=G*8){C.put(0,4)}while(C.getLengthInBits()%8!=0){C.putBit(false)}while(true){if(C.getLengthInBits()>=G*8){break}C.put(y.PAD0,8);if(C.getLengthInBits()>=G*8){break}C.put(y.PAD1,8)}return y.createBytes(C,D)};y.createBytes=function(M,P){var E=0;var S=0;var Q=0;var D=new Array(P.length);var H=new Array(P.length);for(var K=0;K<P.length;K++){var L=P[K].dataCount;var C=P[K].totalCount-L;S=Math.max(S,L);Q=Math.max(Q,C);D[K]=new Array(L);for(var N=0;N<D[K].length;N++){D[K][N]=255&M.buffer[N+E]}E+=L;var I=p.getErrorCorrectPolynomial(C);var R=new w(D[K],I.getLength()-1);var F=R.mod(I);H[K]=new Array(I.getLength()-1);for(var N=0;N<H[K].length;N++){var J=N+F.getLength()-H[K].length;H[K][N]=(J>=0)?F.get(J):0}}var O=0;for(var N=0;N<P.length;N++){O+=P[N].totalCount}var T=new Array(O);var G=0;for(var N=0;N<S;N++){for(var K=0;K<P.length;K++){if(N<D[K].length){T[G++]=D[K][N]}}}for(var N=0;N<Q;N++){for(var K=0;K<P.length;K++){if(N<H[K].length){T[G++]=H[K][N]}}}return T};var e={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var j={L:1,M:0,Q:3,H:2};var A={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(i){var C=i<<10;while(p.getBCHDigit(C)-p.getBCHDigit(p.G15)>=0){C^=(p.G15<<(p.getBCHDigit(C)-p.getBCHDigit(p.G15)))}return((i<<10)|C)^p.G15_MASK},getBCHTypeNumber:function(i){var C=i<<12;while(p.getBCHDigit(C)-p.getBCHDigit(p.G18)>=0){C^=(p.G18<<(p.getBCHDigit(C)-p.getBCHDigit(p.G18)))}return(i<<12)|C},getBCHDigit:function(i){var C=0;while(i!=0){C++;i>>>=1}return C},getPatternPosition:function(i){return p.PATTERN_POSITION_TABLE[i-1]},getMask:function(E,D,C){switch(E){case A.PATTERN000:return(D+C)%2==0;case A.PATTERN001:return D%2==0;case A.PATTERN010:return C%3==0;case A.PATTERN011:return(D+C)%3==0;case A.PATTERN100:return(Math.floor(D/2)+Math.floor(C/3))%2==0;case A.PATTERN101:return(D*C)%2+(D*C)%3==0;case A.PATTERN110:return((D*C)%2+(D*C)%3)%2==0;case A.PATTERN111:return((D*C)%3+(D+C)%2)%2==0;default:throw new Error("bad maskPattern:"+E)}},getErrorCorrectPolynomial:function(D){var C=new w([1],0);for(var E=0;E<D;E++){C=C.multiply(new w([1,v.gexp(E)],0))}return C},getLengthInBits:function(C,i){if(1<=i&&i<10){switch(C){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+C)}}else{if(i<27){switch(C){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+C)}}else{if(i<41){switch(C){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+C)}}else{throw new Error("type:"+i)}}}},getLostPoint:function(C){var E=C.getModuleCount();var F=0;for(var M=0;M<E;M++){for(var D=0;D<E;D++){var K=0;var J=C.isDark(M,D);for(var i=-1;i<=1;i++){if(M+i<0||E<=M+i){continue}for(var I=-1;I<=1;I++){if(D+I<0||E<=D+I){continue}if(i==0&&I==0){continue}if(J==C.isDark(M+i,D+I)){K++}}}if(K>5){F+=(3+K-5)}}}for(var M=0;M<E-1;M++){for(var D=0;D<E-1;D++){var G=0;if(C.isDark(M,D)){G++}if(C.isDark(M+1,D)){G++}if(C.isDark(M,D+1)){G++}if(C.isDark(M+1,D+1)){G++}if(G==0||G==4){F+=3}}}for(var M=0;M<E;M++){for(var D=0;D<E-6;D++){if(C.isDark(M,D)&&!C.isDark(M,D+1)&&C.isDark(M,D+2)&&C.isDark(M,D+3)&&C.isDark(M,D+4)&&!C.isDark(M,D+5)&&C.isDark(M,D+6)){F+=40}}}for(var D=0;D<E;D++){for(var M=0;M<E-6;M++){if(C.isDark(M,D)&&!C.isDark(M+1,D)&&C.isDark(M+2,D)&&C.isDark(M+3,D)&&C.isDark(M+4,D)&&!C.isDark(M+5,D)&&C.isDark(M+6,D)){F+=40}}}var L=0;for(var D=0;D<E;D++){for(var M=0;M<E;M++){if(C.isDark(M,D)){L++}}}var H=Math.abs(100*L/E/E-50)/5;F+=H*10;return F}};var v={glog:function(i){if(i<1){throw new Error("glog("+i+")")}return v.LOG_TABLE[i]},gexp:function(i){while(i<0){i+=255}while(i>=256){i-=255}return v.EXP_TABLE[i]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var u=0;u<8;u++){v.EXP_TABLE[u]=1<<u}for(var u=8;u<256;u++){v.EXP_TABLE[u]=v.EXP_TABLE[u-4]^v.EXP_TABLE[u-5]^v.EXP_TABLE[u-6]^v.EXP_TABLE[u-8]}for(var u=0;u<255;u++){v.LOG_TABLE[v.EXP_TABLE[u]]=u}function w(D,C){if(D.length==f){throw new Error(D.length+"/"+C)}var F=0;while(F<D.length&&D[F]==0){F++}this.num=new Array(D.length-F+C);for(var E=0;E<D.length-F;E++){this.num[E]=D[E+F]}}w.prototype={get:function(i){return this.num[i]},getLength:function(){return this.num.length},multiply:function(F){var D=new Array(this.getLength()+F.getLength()-1);for(var E=0;E<this.getLength();E++){for(var C=0;C<F.getLength();C++){D[E+C]^=v.gexp(v.glog(this.get(E))+v.glog(F.get(C)))}}return new w(D,0)},mod:function(F){if(this.getLength()-F.getLength()<0){return this}var E=v.glog(this.get(0))-v.glog(F.get(0));var C=new Array(this.getLength());for(var D=0;D<this.getLength();D++){C[D]=this.get(D)}for(var D=0;D<F.getLength();D++){C[D]^=v.gexp(v.glog(F.get(D))+E)}return new w(C,0).mod(F)}};function x(i,C){this.totalCount=i;this.dataCount=C}x.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];x.getRSBlocks=function(E,K){var D=x.getRsBlockTable(E,K);if(D==f){throw new Error("bad rs block @ typeNumber:"+E+"/errorCorrectLevel:"+K)}var C=D.length/3;var I=[];for(var G=0;G<C;G++){var H=D[G*3+0];var L=D[G*3+1];var J=D[G*3+2];for(var F=0;F<H;F++){I.push(new x(L,J))}}return I};x.getRsBlockTable=function(C,i){switch(i){case j.L:return x.RS_BLOCK_TABLE[(C-1)*4+0];case j.M:return x.RS_BLOCK_TABLE[(C-1)*4+1];case j.Q:return x.RS_BLOCK_TABLE[(C-1)*4+2];case j.H:return x.RS_BLOCK_TABLE[(C-1)*4+3];default:return f}};function r(){this.buffer=[];this.length=0}r.prototype={get:function(i){var C=Math.floor(i/8);return((this.buffer[C]>>>(7-i%8))&1)==1},put:function(C,E){for(var D=0;D<E;D++){this.putBit(((C>>>(E-D-1))&1)==1)}},getLengthInBits:function(){return this.length},putBit:function(C){var i=Math.floor(this.length/8);if(this.buffer.length<=i){this.buffer.push(0)}if(C){this.buffer[i]|=(128>>>(this.length%8))}this.length++}};var t=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function z(){return typeof CanvasRenderingContext2D!="undefined"}function l(){var i=false;var D=navigator.userAgent;if(/android/i.test(D)){i=true;var C=D.toString().match(/android ([0-9]\.[0-9])/i);if(C&&C[1]){i=parseFloat(C[1])}}return i}var h=(function(){var i=function(C,D){this._el=C;this._htOption=D};i.prototype.draw=function(F){var M=this._htOption;var K=this._el;var C=F.getModuleCount();var I=Math.floor(M.width/C);var J=Math.floor(M.height/C);this.clear();function G(N,P){var Q=document.createElementNS("http://www.w3.org/2000/svg",N);for(var O in P){if(P.hasOwnProperty(O)){Q.setAttribute(O,P[O])}}return Q}var H=G("svg",{viewBox:"0 0 "+String(C)+" "+String(C),width:"100%",height:"100%",fill:M.colorLight});H.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");K.appendChild(H);H.appendChild(G("rect",{fill:M.colorLight,width:"100%",height:"100%"}));H.appendChild(G("rect",{fill:M.colorDark,width:"1",height:"1",id:"template"}));for(var L=0;L<C;L++){for(var E=0;E<C;E++){if(F.isDark(L,E)){var D=G("use",{x:String(E),y:String(L)});D.setAttributeNS("http://www.w3.org/1999/xlink","href","#template");H.appendChild(D)}}}};i.prototype.clear=function(){while(this._el.hasChildNodes()){this._el.removeChild(this._el.lastChild)}};return i})();var c=document.documentElement.tagName.toLowerCase()==="svg";var m=c?h:!z()?(function(){var i=function(C,D){this._el=C;this._htOption=D};i.prototype.draw=function(C){var F=this._htOption;var T=this._el;var E=C.getModuleCount();var M=Math.round(F.width/E);var ad=Math.round((F.height-F.titleHeight)/E);this._htOption.width=M*E;this._htOption.height=ad*E+F.titleHeight;this._htOption.quietZone=Math.round(this._htOption.quietZone);var S=[];var I="";var Y=Math.round(M*F.dotScale);var P=Math.round(ad*F.dotScale);if(Y<4){Y=4;P=4}var Q=F.colorDark;var O=F.colorLight;if(F.backgroundImage){if(F.autoColor){F.colorDark="rgba(0, 0, 0, .6);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#99000000', EndColorStr='#99000000');";F.colorLight="rgba(255, 255, 255, .7);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#B2FFFFFF', EndColorStr='#B2FFFFFF');"}else{F.colorLight="transparent"}var X='<div style="display:inline-block; z-index:-10;position:absolute;"><img src="'+F.backgroundImage+'" widht="'+(F.width+F.quietZone*2)+'" height="'+(F.height+F.quietZone*2)+'" style="opacity:'+F.backgroundImageAlpha+";filter:alpha(opacity="+(F.backgroundImageAlpha*100)+'); "/></div>';S.push(X)}if(F.quietZone){I="display:inline-block; width:"+(F.width+F.quietZone*2)+"px; height:"+(F.width+F.quietZone*2)+"px;background:"+F.quietZoneColor+"; text-align:center;"}S.push('<div style="font-size:0;'+I+'">');S.push('<table  style="font-size:0;border:0;border-collapse:collapse; margin-top:'+F.quietZone+'px;" border="0" cellspacing="0" cellspadding="0" align="center" valign="middle">');S.push('<tr height="'+F.titleHeight+'" align="center"><td style="border:0;border-collapse:collapse;margin:0;padding:0" colspan="'+E+'">');if(F.title){var ab=F.titleColor;var aa=F.titleFont;S.push('<div style="width:100%;margin-top:'+F.titleTop+"px;color:"+ab+";font:"+aa+";background:"+F.titleBackgroundColor+'">'+F.title+"</div>")}if(F.subTitle){S.push('<div style="width:100%;margin-top:'+(F.subTitleTop-F.titleTop)+"px;color:"+F.subTitleColor+"; font:"+F.subTitleFont+'">'+F.subTitle+"</div>")}S.push("</td></tr>");for(var L=0;L<E;L++){S.push('<tr style="border:0; padding:0; margin:0;" height="7">');for(var J=0;J<E;J++){var V=C.isDark(L,J);var ac=C.getEye(L,J);if(ac){V=ac.isDark;var H=ac.type;var W=F[H]||F[H.substring(0,2)]||Q;S.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+ad+'px;"><span style="width:'+M+"px;height:"+ad+"px;background-color:"+(V?W:O)+';display:inline-block"></span></td>')}else{var U=F.colorDark;if(L==6){U=F.timing_H||F.timing||Q;S.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+ad+"px;background-color:"+(V?U:O)+';"></td>')}else{if(J==6){U=F.timing_V||F.timing||Q;S.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+ad+"px;background-color:"+(V?U:O)+';"></td>')}else{S.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+M+"px;height:"+ad+'px;"><div style="display:inline-block;width:'+Y+"px;height:"+P+"px;background-color:"+(V?U:F.colorLight)+';"></div></td>')}}}}S.push("</tr>")}S.push("</table>");S.push("</div>");if(F.logo){var ae=new Image();ae.src=F.logo;var G=F.width/3.5;var N=F.height/3.5;if(G!=N){G=N}if(F.logoWidth){G=F.logoWidth}if(F.logoHeight){N=F.logoHeight}var D="position:relative; z-index:1;display:table-cell;top:-"+((F.height-F.titleHeight)/2+N/2+F.quietZone)+"px;text-align:center; width:"+G+"px; height:"+N+"px;line-height:"+G+"px; vertical-align: middle;";if(!F.logoBackgroundTransparent){D+="background:"+F.logoBackgroundColor}S.push('<div style="'+D+'"><img  src="'+F.logo+'"  style="max-width: '+G+"px; max-height: "+N+'px;" /> <div style=" display: none; width:1px;margin-left: -1px;"></div></div>')}if(F.onRenderingStart){F.onRenderingStart(F)}T.innerHTML=S.join("");var Z=T.childNodes[0];var R=(F.width-Z.offsetWidth)/2;var K=(F.height-Z.offsetHeight)/2;if(R>0&&K>0){Z.style.margin=K+"px "+R+"px"}if(this._htOption.onRenderingEnd){this._htOption.onRenderingEnd(this._htOption,null)}};i.prototype.clear=function(){this._el.innerHTML=""};return i})():(function(){function i(){try{var H=this._elCanvas.toDataURL("image/png");this._elImage.src=H;this.dataURL=H;this._elImage.style.display="inline";this._elCanvas.style.display="none"}catch(G){console.error(G)}if(this._htOption.onRenderingEnd){if(!this.dataURL){console.error("Can not get base64 data, please check: 1. published the page and image to the server 2. The image request support CORS")}this._htOption.onRenderingEnd(this._htOption,this.dataURL)}}if(s._android&&s._android<=2.1){var D=1/window.devicePixelRatio;var E=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(H,M,L,N,J,P,O,G,K){if(("nodeName" in H)&&/img/i.test(H.nodeName)){for(var I=arguments.length-1;I>=1;I--){arguments[I]=arguments[I]*D}}else{if(typeof G=="undefined"){arguments[1]*=D;arguments[2]*=D;arguments[3]*=D;arguments[4]*=D}}E.apply(this,arguments)}}function F(G,K){var H=this;H._fFail=K;H._fSuccess=G;if(H._bSupportDataURI===null){var J=document.createElement("img");var L=function(){H._bSupportDataURI=false;if(H._fFail){H._fFail.call(H)}};var I=function(){H._bSupportDataURI=true;if(H._fSuccess){H._fSuccess.call(H)}};J.onabort=L;J.onerror=L;J.onload=I;J.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}else{if(H._bSupportDataURI===true&&H._fSuccess){H._fSuccess.call(H)}else{if(H._bSupportDataURI===false&&H._fFail){H._fFail.call(H)}}}}var C=function(G,H){this._bIsPainted=false;this._android=l();this._htOption=H;this._elCanvas=document.createElement("canvas");G.appendChild(this._elCanvas);this._el=G;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=false;this._elImage=document.createElement("img");this._elImage.alt="Scan me!";this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null;this.dataURL=null};C.prototype.draw=function(I){var Q=this._elImage;var M=this._oContext;var P=this._htOption;if(!P.title&&!P.subTitle){P.height-=P.titleHeight;P.titleHeight=0}var H=I.getModuleCount();var K=Math.round(P.width/H);var L=Math.round((P.height-P.titleHeight)/H);P.width=K*H;P.height=L*H+P.titleHeight;P.quietZone=Math.round(P.quietZone);this._elCanvas.width=P.width+P.quietZone*2;this._elCanvas.height=P.height+P.quietZone*2;Q.style.display="none";this.clear();M.lineWidth=0;M.fillStyle=P.colorLight;M.fillRect(0,0,this._elCanvas.width,this._elCanvas.height);var N=this;function O(){M.lineWidth=0;M.fillStyle=P.quietZoneColor;M.fillRect(0,0,N._elCanvas.width,P.quietZone);M.fillRect(0,P.quietZone,P.quietZone,N._elCanvas.height-P.quietZone*2);M.fillRect(N._elCanvas.width-P.quietZone,P.quietZone,P.quietZone,N._elCanvas.height-P.quietZone*2);M.fillRect(0,N._elCanvas.height-P.quietZone,N._elCanvas.width,P.quietZone)}if(P.backgroundImage){var G=new Image();G.onload=function(){M.globalAlpha=1;M.globalAlpha=P.backgroundImageAlpha;M.drawImage(G,0,P.titleHeight,P.width+P.quietZone*2,P.height+P.quietZone*2-P.titleHeight);M.globalAlpha=1;J.call(N,I)};G.src=P.backgroundImage}else{J.call(N,I)}function J(Y){if(P.onRenderingStart){P.onRenderingStart(P)}for(var af=0;af<H;af++){for(var W=0;W<H;W++){var S=W*K+P.quietZone;var V=af*L+P.quietZone;var ac=Y.isDark(af,W);var aa=Y.getEye(af,W);if(aa){ac=aa.isDark;var ae=aa.type;var U=P[ae]||P[ae.substring(0,2)]||P.colorDark;M.lineWidth=0;M.strokeStyle=ac?U:P.colorLight;M.fillStyle=ac?U:P.colorLight;M.fillRect(S,P.titleHeight+V,K,L)}else{M.lineWidth=0;M.strokeStyle=ac?P.colorDark:P.colorLight;M.fillStyle=ac?P.colorDark:P.colorLight;var R=P.dotScale;if(af==6){R=1;var X=P.timing_H||P.timing||P.colorDark;M.fillStyle=ac?X:P.colorLight;M.strokeStyle=M.fillStyle;M.fillRect(S+K*(1-R)/2,P.titleHeight+V+L*(1-R)/2,K*R,L*R)}else{if(W==6){R=1;var T=P.timing_V||P.timing||P.colorDark;M.fillStyle=ac?T:P.colorLight;M.strokeStyle=M.fillStyle;M.fillRect(S+K*(1-R)/2,P.titleHeight+V+L*(1-R)/2,K*R,L*R)}else{if(P.backgroundImage){if(P.autoColor){M.strokeStyle=ac?"rgba(0, 0, 0, .6)":"rgba(255, 255, 255, .7)";M.fillStyle=ac?"rgba(0, 0, 0, .6)":"rgba(255, 255, 255, .7)"}else{M.strokeStyle=ac?P.colorDark:"rgba(0,0,0,0)";M.fillStyle=ac?P.colorDark:"rgba(0,0,0,0)";M.strokeStyle=M.fillStyle}M.fillRect(S+K*(1-R)/2,P.titleHeight+V+L*(1-R)/2,K*R,L*R)}else{M.strokeStyle=M.fillStyle;M.fillRect(S+K*(1-R)/2,P.titleHeight+V+L*(1-R)/2,K*R,L*R)}}}}if(P.dotScale!=1&&!aa){M.strokeStyle=P.colorLight}}}if(P.title){M.fillStyle=P.titleBackgroundColor;M.fillRect(0,0,this._elCanvas.width,P.titleHeight+P.quietZone);M.font=P.titleFont;M.fillStyle=P.titleColor;M.textAlign="center";M.fillText(P.title,this._elCanvas.width/2,+P.quietZone+P.titleTop)}if(P.subTitle){M.font=P.subTitleFont;M.fillStyle=P.subTitleColor;M.fillText(P.subTitle,this._elCanvas.width/2,+P.quietZone+P.subTitleTop)}function ad(al){var aj=Math.round(P.width/3.5);var ap=Math.round(P.height/3.5);if(aj!==ap){aj=ap}if(P.logoWidth){aj=Math.round(P.logoWidth)}if(P.logoHeight){ap=Math.round(P.logoHeight)}var ai=(P.width+P.quietZone*2-aj)/2;var ag=(P.height+P.titleHeight+P.quietZone*2-ap)/2;if(!P.logoBackgroundTransparent){M.fillStyle=P.logoBackgroundColor;M.fillRect(ai,ag,aj,ap)}var am;var ah;if(typeof al.naturalWidth=="undefined"){am=al.width;ah=al.height}else{am=al.naturalWidth;ah=al.naturalHeight}var ao=Math.min(aj/am,ap/ah);var an=am*ao;var ak=ah*ao;M.drawImage(al,ai+(aj-an)/2,ag+(ap-ak)/2,an,ak);if(P.quietZone>0&&P.quietZoneColor){O()}ab._bIsPainted=true;ab.makeImage()}if(P.logo){var Z=new Image();var ab=this;Z.onload=function(){ad(Z)};Z.onerror=function(ag){console.error(ag)};Z.src=P.logo}else{this._bIsPainted=true;this.makeImage()}}};C.prototype.makeImage=function(){if(this._bIsPainted){F.call(this,i)}};C.prototype.isPainted=function(){return this._bIsPainted};C.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=false};C.prototype.remove=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=false;this._el.innerHTML=""};C.prototype.round=function(G){if(!G){return G}return Math.floor(G*1000)/1000};return C})();function a(E,I){var G=I.correctLevel;var D=1;var H=o(E);for(var F=0,C=t.length;F<=C;F++){var J=0;switch(G){case j.L:J=t[F][0];break;case j.M:J=t[F][1];break;case j.Q:J=t[F][2];break;case j.H:J=t[F][3];break}if(H<=J){break}else{D++}}if(D>t.length){throw new Error("Too long data")}if(I.version!=0){if(D<=I.version){D=I.version;I.runVersion=D}else{console.warn("QR Code version "+I.version+" too small, run version use "+D);I.runVersion=D}}return D}function o(C){var i=encodeURI(C).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return i.length+(i.length!=C.length?3:0)}q=function(D,E){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:j.H,dotScale:1,quietZone:0,quietZoneColor:"transparent",title:"",titleFont:"bold 16px Arial",titleColor:"#000000",titleBackgroundColor:"#ffffff",titleHeight:0,titleTop:30,subTitle:"",subTitleFont:"14px Arial",subTitleColor:"#4F4F4F",subTitleTop:60,logo:f,logoWidth:f,logoHeight:f,logoBackgroundColor:"#ffffff",logoBackgroundTransparent:false,PO:f,PI:f,PO_TL:f,PI_TL:f,PO_TR:f,PI_TR:f,PO_BL:f,PI_BL:f,AO:f,AI:f,timing:f,timing_H:f,timing_V:f,backgroundImage:f,backgroundImageAlpha:1,autoColor:false,onRenderingStart:f,onRenderingEnd:f,version:0,tooltip:false,binary:false};if(typeof E==="string"){E={text:E}}if(E){for(var C in E){this._htOption[C]=E[C]}}if(this._htOption.version<0||this._htOption.version>40){console.warn("QR Code version '"+this._htOption.version+"' is invalidate, reset to 0");this._htOption.version=0}if(this._htOption.dotScale<0||this._htOption.dotScale>1){console.warn(this._htOption.dotScale+" , is invalidate, dotScale must greater than 0, less than or equal to 1, now reset to 1. ");this._htOption.dotScale=1}if(this._htOption.backgroundImageAlpha<0||this._htOption.backgroundImageAlpha>1){console.warn(this._htOption.backgroundImageAlpha+" , is invalidate, backgroundImageAlpha must between 0 and 1, now reset to 1. ");this._htOption.backgroundImageAlpha=1}this._htOption.height=this._htOption.height+this._htOption.titleHeight;if(typeof D=="string"){D=document.getElementById(D)}if(this._htOption.useSVG){m=h}this._android=l();this._el=D;this._oQRCode=null;this._oDrawing=new m(this._el,this._htOption);if(this._htOption.text){this.makeCode(this._htOption.text)}};q.prototype.makeCode=function(i){this._oQRCode=new y(a(i,this._htOption),this._htOption.correctLevel);this._oQRCode.addData(i,this._htOption.binary);this._oQRCode.make();if(this._htOption.tooltip){this._el.title=i}this._oDrawing.draw(this._oQRCode)};q.prototype.makeImage=function(){if(typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)){this._oDrawing.makeImage()}};q.prototype.clear=function(){this._oDrawing.remove()};q.prototype.resize=function(C,i){this._htOption.width=C;this._htOption.height=i;this._oDrawing.draw(this._oQRCode)};q.prototype.noConflict=function(){if(s.QRCode===this){s.QRCode=b}return q};q.CorrectLevel=j;if(typeof define=="function"&&(define.amd||define.cmd)){define([],function(){return q})}else{if(B){(B.exports=q).QRCode=q;k.QRCode=q}else{s.QRCode=q}}}.call(this));